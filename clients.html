<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NMD Accountancy</title>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700&display=swap" rel="stylesheet">
<style>

body {
    font-family: Inter, Segoe UI, Roboto, Arial;
    margin: 0;
    background-color: #0a0f0d;
    color: #e0f2f1;
}
/* Sidebar */
.sidebar {
    position: fixed;
    left: 0;
    top: 0;
    width: 220px;
    height: 100%;
    background-color: #123822;
    padding-top: 20px;
    display: flex;
    flex-direction: column;
    transition: width 0.3s;
    overflow: hidden;
}
.sidebar.collapsed {
    width: 60px;
}
.sidebar .logo {
    width: 120px;
    margin: 20px;
    margin-left: 60px;
    transition: width 0.3s, margin 0.3s;
}
.sidebar.collapsed .logo {
    margin-left: 10px;
}
.sidebar .logo img {
    width: 70%;
    border-radius: 100%;
    border: solid;
    border-color: aquamarine;
}
.sidebar.collapsed .logo img {
    width: 30%;
}
.sidebar a {
    padding: 15px 20px;
    text-decoration: none;
    color: #e0f2f1;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: 0.3s;
    font-weight: 500;
}
.sidebar.collapsed a span.text {
    display: none;
}
.sidebar a svg {
    width: 20px;
    height: 20px;
    fill: #e0f2f1;
}
.sidebar a:hover {
    background-color: #2e7d60;
}
.sidebar a.active {
    background-color: #1b5e43;
}
/* Sidebar toggle button */
#sidebarToggle {
    cursor: pointer;
    color: #a8e6cf;
    font-size: 1.5rem;
    text-align: center;
    margin-bottom: 20px;
    transition: transform 0.3s;
}
#sidebarToggle.collapsed {
    transform: rotate(180deg);
}
/* Main content */
/* Main Content Styling */
.main-content {
    margin-left: 220px; /* Adjust according to sidebar */
    padding: 30px 40px;
    transition: margin-left 0.3s;
    background-color: #0a0f0d;
    min-height: 100vh;
}

.sidebar.collapsed ~ .main-content {
    margin-left: 60px;
}

/* Top Bar */
#topBar {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
    font-weight: 500;
    color: #a8e6cf;
    font-size: 0.95rem;
}

/* Headings */
.main-content h1 {
    color: #a8e6cf;
    text-align: left;
}

.main-content h3 {
    color: #a8e6cf;
    margin-top: 30px;
    margin-bottom: 15px;
}

.main-content label{
    margin: 5px;
}

/* Input Fields Container */
.input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 20px; /* spacing between fields */
    margin-bottom: 20px;
}

/* Single input wrapper */
.input-field {
    display: flex;
    flex-direction: column; /* label on top, input below */
    flex: 1;
    min-width: 250px;
}

/* Labels */
.input-field label {
    margin-bottom: 5px;
    font-size: 0.9rem;
    color: #a8e6cf;
    font-weight: 500;
}

/* Inputs */
.input-field input {
    padding: 10px 12px;
    border-radius: 6px;
    border: 1px solid #1b5e36;
    background-color: #123822;
    color: #e0f2f1;
    font-size: 1rem;
    outline: none;
    transition: 0.3s;
}

/* Add button */
.input-group button {
    padding: 10px 20px;
    border-radius: 6px;
    border: none;
    background-color: #2e7d60;
    color: #e0f2f1;
    font-weight: 500;
    cursor: pointer;
    transition: 0.3s;
    align-self: flex-end; /* button aligns with bottom of inputs */
}

.input-group button:hover {
    background-color: #1b5e43;
}

/* Responsive: stack on small screens */
@media (max-width: 768px) {
    .input-group {
        flex-direction: column;
    }
    .input-group button {
        width: 100%;
        align-self: stretch;
    }
}


/* Buttons */
.main-content button {
    padding: 10px 18px;
    border-radius: 6px;
    background-color: #2e7d60;
    color: #e0f2f1;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: background 0.3s, transform 0.2s;
    margin-left: 10px;
}

.main-content button:hover {
    background-color: #1b5e43;
    transform: translateY(-1px);
}

.main-content button:active {
    transform: translateY(1px);
}

/* Table Styling */
.main-content table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    font-size: 0.95rem;
}

.main-content table th,
.main-content table td {
    border: 1px solid #1b5e36;
    padding: 10px;
    text-align: left;
}

.main-content table th {
    background-color: #2e7d60;
    color: #e0f2f1;
}

.main-content table tr:nth-child(even) {
    background-color: #0f1a14;
}

/* Action buttons in table */
.main-content .action-btn {
    padding: 6px 10px;
    margin-right: 5px;
    font-size: 0.85rem;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    background-color: #2e7d60;
    color: #e0f2f1;
    transition: 0.3s;
}

.main-content .action-btn:hover {
    background-color: #1b5e43;
}

/* Small screens (mobile) */
@media screen and (max-width: 768px) {
    .sidebar {
        width: 60px; /* collapse sidebar on mobile */
    }
    .sidebar.collapsed {
        width: 60px;
    }
    .sidebar .logo {
        margin-left: 10px;
        width: 80px;
    }
    .sidebar .logo img {
        width: 40%;
    }
    .sidebar a span.text {
        display: none; /* hide sidebar labels */
    }
    .main-content {
        margin-left: 60px; /* adjust content margin */
        padding: 20px;
    }

    /* Top Bar */
    #topBar {
        flex-wrap: wrap; /* allow wrapping */
        font-size: 0.85rem;
        gap: 10px;
    }

    /* Headings */
    .main-content h1 {
        font-size: 1.5rem;
    }

    /* Form Inputs */
    .main-content input[type="text"],
    .main-content input[type="email"] {
        width: 90%;
        font-size: 0.9rem;
    }

    /* Buttons */
    .main-content button {
        padding: 8px 14px;
        font-size: 0.9rem;
        margin-left: 0;
    }

    /* Tables */
    .main-content table {
        font-size: 0.85rem;
        overflow-x: auto;
        display: block;
    }
}

/* Medium screens (tablets) */
@media screen and (max-width: 1024px) {
    .main-content {
        padding: 25px 40px;
    }

    .main-content h1 {
        font-size: 1.75rem;
    }

    .main-content input[type="text"],
    .main-content input[type="email"] {
        width: 90%;
    }

    .main-content button {
        padding: 9px 16px;
    }

    #topBar {
        font-size: 0.9rem;
        gap: 15px;
    }
}

/* Extra small screens (phones) */
@media screen and (max-width: 480px) {
    .main-content {
        padding: 15px 20px;
    }

    .main-content input[type="text"],
    .main-content input[type="email"] {
        width: 93%;
    }

    .main-content button {
        width: 100%;
        margin-left: 0;
    }

    .main-content table th,
    .main-content table td {
        padding: 6px;
    }

    .main-content table {
        font-size: 0.8rem;
    }
}

/* Responsive: stack vertically on smaller screens */
@media (max-width: 1024px) {
    td > .action-btn {
        padding: 5px 8px;
        font-size: 0.8rem;
    }
}

@media (max-width: 768px) {
    td > .action-btn {
        display: block;
        width: 100%;
        margin: 4px 0;
        text-align: center;
    }
}

@media (max-width: 480px) {
    td > .action-btn {
        font-size: 0.75rem;
        padding: 4px 6px;
    }
}

/* ---------- Search Input ---------- */
.search-group {
    margin-top: 30px;
    display: flex;
    justify-content: flex-start;
}

#clientSearchInput {
    width: 100%;
    background-color: #0a1b15;
    color: #a8e6cf;
    padding: 10px 15px;
    font-size: 14px;
    border: 1px solid #0d6243;
    border-radius: 8px;
    outline: none;
    transition: all 0.3s ease;
}

#clientSearchInput:focus {
    border-color: #21ad7f; /* matches your sidebar purple theme */
    box-shadow: 0 0 5px rgba(49, 131, 93, 0.5);
}


</style>
</head>
<body>

<div class="sidebar">
    <div id="sidebarToggle">â—€</div>
    <div class="logo">
        <img src="invoice.jpg" alt="NMD Accountancy Logo">
    </div>
    <a href="dashboard.html" id="navDashboard">
        <svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8v-10h-8v10zm0-18v6h8V3h-8z"/></svg>
        <span class="text">Dashboard</span>
    </a>
    <a href="clients.html">
        <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        <span class="text">Add Clients</span>
    </a>
    <a href="invoice.html" id="navCreate">
        <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V5a2 2 0 00-2-2zm-7 14H7v-2h5v2zm5-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
        <span class="text">Create Invoice</span>
    </a>
    <a href="edit.html" id="navSaved">
        <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
        <span class="text">Manage Invoices</span>
    </a>
    <a href="cover.html" id="navDownload">
        <svg viewBox="0 0 24 24" width="24" height="24"> <path d="M19 8H5c-1.1 0-2 .9-2 2v6h4v4h10v-4h4v-6c0-1.1-.9-2-2-2zm-1 8H6v-5h12v5zm-5-9h-2V3h2v4z"/></svg>
        <span class="text">Cover Page</span>
    </a>
    <a href="#" id="navLogout">
        <svg viewBox="0 0 24 24"><path d="M16 13v-2H7V7l-5 5 5 5v-4h9zm3-10H5c-1.1 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
        <span class="text">Logout</span>
    </a>
</div>

<div class="main-content">
    <div id="topBar">
        <span id="adminName">Admin: NMD Accountancy</span>
        <span id="systemDateTime"></span>
    </div>
<h1>Clients Management</h1>

<div class="input-group">
    <div class="input-field">
        <label for="clientNameInput">Client Name:</label>
        <input type="text" id="clientNameInput" placeholder="Enter client name">
    </div>
    <div class="input-field">
        <label for="contactInput">Contact:</label>
        <input type="text" id="contactInput" placeholder="Enter contact number">
    </div>
    <div class="input-field">
        <label for="emailInput">Email:</label>
        <input type="email" id="emailInput" placeholder="Enter email">
    </div>
    <div class="input-field">
        <label for="locationInput">Address:</label>
        <input type="text" id="locationInput" placeholder="Enter address">
    </div>
    
    <button id="addClientBtn">Add Client</button>
</div>
<hr>
<div class="search-group">
    <input type="text" id="clientSearchInput" placeholder="Search by name, email, contact, or address">
</div>


<h3>Saved Clients</h3>
<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Client Name</th>
            <th>Email</th> <!-- New column -->
            <th>Contact</th>
            <th>Address</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody id="clientsTable"></tbody>
</table>
</div>

<!-- Watermark Footer -->
<div style="position: fixed; bottom: 0; right: 0; width: 100%; text-align: right; 
            font-size: 12px; color: rgba(255,255,255,0.2); padding: 5px 20px; 
            pointer-events: none; user-select: none; z-index: 9999;">
    &copy; Developed by Grow More Solutions Pvt Ltd
</div>

<script>

    // ------------------------------
// LOGIN CHECK
// ------------------------------
if(localStorage.getItem('isLoggedIn') !== 'true'){
    alert('Please login first!');
    window.location.href = 'index.html';
} else {
   // const userEmail = localStorage.getItem('userEmail') || 'User';
   // document.getElementById('welcomeMsg').textContent = `Welcome, ${userEmail}!`;
}

let editIndex = null;

document.getElementById('addClientBtn').addEventListener('click', () => {
    const name = document.getElementById('clientNameInput').value.trim();
    const contact = document.getElementById('contactInput').value.trim();
    const location = document.getElementById('locationInput').value.trim();
    const email = document.getElementById('emailInput').value.trim(); // new

    if(!name || !contact || !location || !email){
        return alert("All fields are required");
    }

    const clients = JSON.parse(localStorage.getItem('clients')||'[]');

    if(editIndex !== null){
        // Edit existing client
        clients[editIndex] = {name, contact, location, email};
        editIndex = null;
    } else {
        // Prevent duplicate client names
        if(clients.find(c => c.name === name)){
            return alert("Client already exists");
        }
        clients.push({name, contact, location, email});
    }

    localStorage.setItem('clients', JSON.stringify(clients));

    // Reset inputs
    document.getElementById('clientNameInput').value = '';
    document.getElementById('contactInput').value = '';
    document.getElementById('locationInput').value = '';
    document.getElementById('emailInput').value = '';

    renderClients();
});

// ---------- Render Clients ----------
function renderClients(){
    const clients = JSON.parse(localStorage.getItem('clients')||'[]');
    const tbody = document.getElementById('clientsTable');
    tbody.innerHTML = '';
    clients.forEach((c, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${i+1}</td>
            <td>${c.name}</td>
            <td>${c.email}</td> <!-- new -->
            <td>${c.contact}</td>
            <td>${c.location}</td>
            
            <td>
                <button class="editBtn action-btn">Edit</button>
                <button class="delBtn action-btn">Delete</button>
            </td>`;
        tbody.appendChild(tr);

        // Edit client
        tr.querySelector('.editBtn').addEventListener('click', () => {
            document.getElementById('clientNameInput').value = c.name;
            document.getElementById('contactInput').value = c.contact;
            document.getElementById('locationInput').value = c.location;
            document.getElementById('emailInput').value = c.email;
            editIndex = i;
        });

        // Delete client
        tr.querySelector('.delBtn').addEventListener('click', () => {
            clients.splice(i, 1);
            localStorage.setItem('clients', JSON.stringify(clients));
            renderClients();
        });
    });
}
renderClients();


// ------------------------------
// SEARCH CLIENTS
// ------------------------------
document.getElementById('clientSearchInput').addEventListener('input', function(){
    const query = this.value.toLowerCase();
    const clients = JSON.parse(localStorage.getItem('clients')||'[]');
    const tbody = document.getElementById('clientsTable');
    tbody.innerHTML = '';

    clients.forEach((c, i) => {
        if(
            c.name.toLowerCase().includes(query) ||
            c.email.toLowerCase().includes(query) ||
            c.contact.toLowerCase().includes(query) ||
            c.location.toLowerCase().includes(query)
        ){
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${i+1}</td>
                <td>${c.name}</td>
                <td>${c.email}</td>
                <td>${c.contact}</td>
                <td>${c.location}</td>
                <td>
                    <button class="editBtn action-btn">Edit</button>
                    <button class="delBtn action-btn">Delete</button>
                </td>`;
            tbody.appendChild(tr);

            // Edit client
            tr.querySelector('.editBtn').addEventListener('click', () => {
                document.getElementById('clientNameInput').value = c.name;
                document.getElementById('contactInput').value = c.contact;
                document.getElementById('locationInput').value = c.location;
                document.getElementById('emailInput').value = c.email;
                editIndex = i;
            });

            // Delete client
            tr.querySelector('.delBtn').addEventListener('click', () => {
                clients.splice(i, 1);
                localStorage.setItem('clients', JSON.stringify(clients));
                renderClients();
            });
        }
    });
});


// Collapsible sidebar
const sidebar = document.querySelector('.sidebar');
const toggleBtn = document.getElementById('sidebarToggle');
toggleBtn.addEventListener('click', ()=>{
    sidebar.classList.toggle('collapsed');
    toggleBtn.classList.toggle('collapsed');
});
// Live date/time
function updateDateTime(){
    const now = new Date();
    const options={ weekday:'short', year:'numeric', month:'short', day:'numeric',
        hour:'2-digit', minute:'2-digit', second:'2-digit'};
    document.getElementById('systemDateTime').textContent = now.toLocaleDateString('en-US', options);
}
setInterval(updateDateTime,1000);
updateDateTime();

// ------------------------------
// LOGOUT BUTTON
// ------------------------------
document.getElementById('navLogout').addEventListener('click', ()=>{
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('userEmail');
    window.location.href = 'index.html';
});

// ------------------------------
// AUTO LOGOUT AFTER INACTIVITY
// ------------------------------
const AUTO_LOGOUT_TIME = 15*60*1000; 
let logoutTimer;
function startLogoutTimer(){
    logoutTimer = setTimeout(()=>{
        alert("You have been logged out due to inactivity.");
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('userEmail');
        window.location.href = 'index.html';
    }, AUTO_LOGOUT_TIME);
}
function resetLogoutTimer(){
    clearTimeout(logoutTimer);
    startLogoutTimer();
}
document.addEventListener('mousemove', resetLogoutTimer);
document.addEventListener('keydown', resetLogoutTimer);
document.addEventListener('click', resetLogoutTimer);
startLogoutTimer();

</script>

</body>
</html>

